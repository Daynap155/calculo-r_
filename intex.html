<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Dominio y Rango</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
    }
    input, button {
      padding: 8px;
      margin: 5px;
    }
    #resultado {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h2>Calculadora de Dominio y Rango (Visual)</h2>

  <label for="funcion">Ingresa la función (en x):</label>
  <input type="text" id="funcion" value="Math.sin(x)">
  <button onclick="graficar()">Graficar</button>

  <div id="grafica" style="width: 100%; height: 500px;"></div>
  <div id="resultado"></div>

  <script>
    function graficar() {
      const fxStr = document.getElementById("funcion").value;
      let x = [];
      let y = [];
      let minY = Infinity;
      let maxY = -Infinity;

      for (let i = -20; i <= 20; i += 0.1) {
        try {
          const val = eval(fxStr.replace(/x/g, (${i})));
          if (isFinite(val)) {
            x.push(i);
            y.push(val);
            if (val < minY) minY = val;
            if (val > maxY) maxY = val;
          }
        } catch (e) {
          continue;
        }
      }

      Plotly.newPlot('grafica', [{
        x: x,
        y: y,
        mode: 'lines',
        name: fxStr
      }], {
        title: 'Gráfica de la función',
        xaxis: { title: 'x', range: [-20, 20] },
        yaxis: { title: 'f(x)' }
      });

      document.getElementById("resultado").innerHTML =
        `<strong>Dominio:</strong> de -20 a 20 (aproximado)<br>
         <strong>Rango:</strong> de ${minY.toFixed(2)} a ${maxY.toFixed(2)} (estimado visualmente)`;
    }
  </script>

</body>
</html>
